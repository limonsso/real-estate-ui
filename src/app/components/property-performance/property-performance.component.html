<div fxLayout="column">
  <app-page-title [Title]="'Statistique de rendement'" [Sub_title]="''"></app-page-title>
  <div *ngIf="propertyDetails" fxLayout="row" fxLayoutAlign="center" style="height: 100%">
    <div class="block" fxFlex="90" fxLayout="row">
      <div fxLayout="column" fxFlex="100" fxLayoutGap="15px">
        <div fxLayout="row" fxLayoutGap="15px">
          <div class="prt-img" fxFlex="25">
            <img src="{{propertyDetails.images[0]}}">
          </div>
          <div fxLayout="column" fxFlex>
            <h3 class="prt-title">{{propertyDetails.type}}
              <span *ngIf="propertyDetails.vendue === false; else vendu">à vendre</span>
              <ng-template #vendu>
                <span class="prt-vendue">VENDU</span>
              </ng-template>
            </h3>
            <span class="prt-price">{{propertyDetails.price |
              currency:'CAD':'symbol'}}</span>
            <div fxLayout="row" fxLayoutAlign=" center" fxLayoutGap="5px">
              <mat-icon>location_on_outlined</mat-icon>
              <span>{{propertyDetails.street}}, {{propertyDetails.city}}</span>
            </div>
            <p class="prt-desc">{{propertyDetails.description}}</p>
            <div fxLayout="row" fxLayoutGap="5px">
              <span class="prt-block-item" *ngIf="propertyDetails.unites"><b>unitées : </b>
                <span *ngFor="let unite of propertyDetails.unites; let last = last">
                  {{unite.nombreUnite}} x {{unite.type}}<span *ngIf="!last">,</span>
                </span>
              </span>
              <span class="prt-block-item"><b>rev. pot. bruts : </b>{{propertyDetails.revenusAnnuelBruts |
                currency:'CAD':'symbol'}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="propertyDetails" fxLayout="row" fxLayoutAlign="center" style="height: 100%">
    <div fxFlex="90" fxLayout="row">
      <div fxLayout="row" fxLayoutGap="15px" fxFlex="100">
        <div class="prt-block" fxLayout="column" fxFlex="75">
          <div fxLayout="column" fxLayoutGap="20px">
            <div fxLayout="row" fxLayoutGap="40px" fxLayoutAlign=" center">
              <div fxLayout="column" fxFlex="30" fxLayoutGap="5px">
                <label for="libele_depense">Dépense</label>
                <input id="libele_depense" type="text" class="input-control simple" [(ngModel)]="libele_depense">
              </div>
              <div fxLayout="column" fxFlex="30" fxLayoutGap="5px">
                <label for="montant_depense">Montant (par an)</label>
                <input id="montant_depense" type="number" class="input-control simple" [(ngModel)]="montant_depense">
              </div>
              <button class="add-btn" (click)="addDepense()">
                Ajouter une dépense
              </button>
            </div>
            <div fxLayout="column" fxLayoutGap="15px">
              <div fxLayout="row" fxLayoutAlign="space-between end" *ngFor="let depense of depenses">
                <span>{{depense.libele}}</span>
                <div class="line-btw" fxFlex></div>
                <span>{{depense.montant | currency:'CAD':'symbol'}}</span>
                <button *ngIf="depense.can_be_delete" class="remove-btn" fxLayout="row" fxLayoutAlign="center center"
                  (click)="removeDepense (depense)">
                  <mat-icon>clear</mat-icon>
                </button>
              </div>
              <div fxLayout="row" fxLayoutAlign="space-between end">
                <strong>Total des depenses</strong>
                <div class="line-btw" fxFlex></div>
                <strong>{{total_depenses | currency:'CAD':'symbol'}}</strong>
              </div>
            </div>

            <!--            <div class="widget-block-item" fxLayout="row" fxLayoutAlign="space-between center">
                          <span><b>M</b>ultiplicateur de <b>R</b>evenue <b>B</b>rut</span> <strong>10 $</strong>
                        </div>
                        <div class="widget-block-item" fxLayout="row" fxLayoutAlign="space-between center">
                          <span><b>M</b>ultiplicateur de <b>R</b>evenue <b>N</b>et</span> <strong>10 $</strong>
                        </div>-->
            <app-property-ratio-performance [Price]="propertyDetails.price"
              [RevenuPotentielAnnuel]="propertyDetails.revenusAnnuelBruts"></app-property-ratio-performance>

            <div>
              <style>
                .ico {
                  color: rgb(24, 24, 24);
                  font-size: 40px;
                  cursor: pointer;
                }

                .tooltip-custom {
                  font-size: small;
                  max-width: 340px;
                  display: flex;
                  position: absolute;
                  z-index: 98;
                  margin-top: -135px;
                  margin-left: -160px;
                  background-color: rgba(255, 255, 255);
                  border-radius: 8px;
                  padding: 5px;
                  box-shadow: 0 2px 7px 1px rgb(0 0 0 / 10%);
                  box-sizing: border-box;
                  /*opacity: 0;*/
                  transition: .6s ease opacity;
                }

                .tooltip-info {
                  display: flex;
                  flex-direction: column;
                }

                .tooltip-custom img {
                  max-width: 55%;
                  flex: 1 1 100%;
                  margin-right: 10px;
                }

                .tooltip-custom:before {
                  content: "";
                  position: absolute;
                  /* position tooltip correctly */
                  left: 50%;
                  /* vertically center */
                  top: 100%;
                  /* the arrow */
                  border: 10px solid rgb(255, 255, 255);
                  border-color: rgba(255, 255, 255) transparent transparent transparent;
                  box-sizing: border-box;
                }
              </style>
              <a class="tooltip-custom">
                <img src="	https://themezhub.net/resido-live-02/resido/assets/img/p-4.jpg">
                <div class="tooltip-info">
                  <strong>Quadruplex à vendre</strong>
                  <span><strong>5000$</strong></span>
                  <span>1520 - 1526, Rue Léo-Ayotte, Trois-Rivières</span>
                </div>
              </a>
              <span class="material-icons ico" style="font-size:36px; ">
                location_on
              </span>
            </div>
            <app-property-map [style.height]="'300px'" [LatitudeCenter]="propertyDetails.latitude"
              [LongitudeCenter]="propertyDetails.longitude" [PropertiesInfos]="mapInfos">
            </app-property-map>
          </div>
        </div>
        <app-property-mortgage-calculator [Price]="propertyDetails.price"></app-property-mortgage-calculator>
      </div>
    </div>
  </div>
</div>
